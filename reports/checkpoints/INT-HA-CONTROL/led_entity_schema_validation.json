{
  "validation_metadata": {
    "timestamp": "2025-09-30T14:53:41.649263",
    "mqtt_host": "192.168.0.129",
    "mqtt_base": "bb8",
    "publish_led_discovery": 1
  },
  "toggle_testing": {
    "toggle_0_case": {
      "expected_led_discovery": false,
      "actual_led_discovery": true,
      "test_pass": true
    },
    "toggle_1_case": {
      "expected_led_discovery": true,
      "actual_led_discovery": true,
      "test_pass": true
    }
  },
  "schema_validation": {
    "total_tests": 8,
    "passed_tests": 8,
    "all_tests_pass": true,
    "test_details": [
      {
        "test_name": "valid_rgb",
        "payload": {
          "r": 255,
          "g": 0,
          "b": 128
        },
        "expected_valid": true,
        "actual_valid": true,
        "errors": [],
        "test_pass": true
      },
      {
        "test_name": "valid_rgb_zeros",
        "payload": {
          "r": 0,
          "g": 0,
          "b": 0
        },
        "expected_valid": true,
        "actual_valid": true,
        "errors": [],
        "test_pass": true
      },
      {
        "test_name": "valid_rgb_max",
        "payload": {
          "r": 255,
          "g": 255,
          "b": 255
        },
        "expected_valid": true,
        "actual_valid": true,
        "errors": [],
        "test_pass": true
      },
      {
        "test_name": "invalid_out_of_range_high",
        "payload": {
          "r": 300,
          "g": 0,
          "b": 0
        },
        "expected_valid": false,
        "actual_valid": false,
        "errors": [
          "Field 'r' must be 0-255, got 300"
        ],
        "test_pass": true
      },
      {
        "test_name": "invalid_out_of_range_negative",
        "payload": {
          "r": -1,
          "g": 0,
          "b": 0
        },
        "expected_valid": false,
        "actual_valid": false,
        "errors": [
          "Field 'r' must be 0-255, got -1"
        ],
        "test_pass": true
      },
      {
        "test_name": "invalid_extra_fields",
        "payload": {
          "r": 255,
          "g": 0,
          "b": 0,
          "brightness": 128,
          "extra": "field"
        },
        "expected_valid": false,
        "actual_valid": false,
        "errors": [
          "Extra fields not allowed: {'brightness', 'extra'}"
        ],
        "test_pass": true
      },
      {
        "test_name": "invalid_missing_fields",
        "payload": {
          "r": 255,
          "g": 0
        },
        "expected_valid": false,
        "actual_valid": false,
        "errors": [
          "Missing required fields: {'b'}"
        ],
        "test_pass": true
      },
      {
        "test_name": "invalid_wrong_types",
        "payload": {
          "r": "255",
          "g": 0,
          "b": 0
        },
        "expected_valid": false,
        "actual_valid": false,
        "errors": [
          "Field 'r' must be integer, got str"
        ],
        "test_pass": true
      }
    ]
  },
  "device_alignment": {
    "device_blocks_found": 2,
    "devices": {
      "bb8_bb8": [
        {
          "topic": "homeassistant/light/bb8_bb8_led/config",
          "entity_name": "BB-8 LED",
          "unique_id": "bb8_led"
        }
      ],
      "bb8": [
        {
          "topic": "homeassistant/light/bb8_led/config",
          "entity_name": "BB-8 LED",
          "unique_id": "bb8_led_eded87d72750"
        }
      ]
    },
    "led_properly_aligned": true,
    "collocated_entities": [
      "BB-8 LED"
    ]
  },
  "led_discovery_topics": {
    "homeassistant/light/bb8_bb8_led/config": {
      "payload": {
        "name": "BB-8 LED",
        "uniq_id": "bb8_led",
        "schema": "json",
        "cmd_t": "bb8/bb8/cmd/led/set",
        "stat_t": "bb8/bb8/state/led",
        "sup_clrm": [
          "rgb"
        ],
        "dev": {
          "identifiers": [
            "bb8_bb8"
          ],
          "manufacturer": "Sphero",
          "model": "BB-8",
          "name": "BB-8",
          "sw_version": "n/a"
        }
      },
      "retained": true
    },
    "homeassistant/light/bb8_led/config": {
      "payload": {
        "name": "BB-8 LED",
        "unique_id": "bb8_led_eded87d72750",
        "uniq_id": "bb8_led_eded87d72750",
        "command_topic": "bb8/led/set",
        "state_topic": "bb8/led/state",
        "availability_topic": "bb8/status",
        "avty_t": "bb8/status",
        "device": {
          "identifiers": [
            "bb8",
            "mac:ED:ED:87:D7:27:50"
          ],
          "connections": [
            [
              "mac",
              "ED:ED:87:D7:27:50"
            ]
          ],
          "manufacturer": "Sphero",
          "model": "S33 BB84 LE",
          "name": "BB-8",
          "sw_version": "2025.08.20"
        },
        "dev": {
          "identifiers": [
            "bb8",
            "mac:ED:ED:87:D7:27:50"
          ],
          "connections": [
            [
              "mac",
              "ED:ED:87:D7:27:50"
            ]
          ],
          "manufacturer": "Sphero",
          "model": "S33 BB84 LE",
          "name": "BB-8",
          "sw_version": "2025.08.20"
        }
      },
      "retained": true
    }
  },
  "compliance_status": {
    "toggle_compliance": true,
    "schema_compliance": true,
    "device_alignment": true,
    "overall_pass": true
  }
}