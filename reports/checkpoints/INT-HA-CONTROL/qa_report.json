{
  "timestamp": "2025-10-07T17:42:22+01:00",
  "test_phase": "INT-HA-CONTROL Step B",
  "summary": {
    "echo_ok": true,
    "p0_ok": true,
    "persistence_ok": true,
    "ownership_ok": true,
    "led_gate_ok": true,
    "overall_pass": true
  },
  "details": {
    "echo_test": {
      "status": "PASS",
      "description": "MQTT echo roundtrip test (5/5 pings ≤1000ms)"
    },
    "p0_stability": {
      "status": "PASS",
      "duration_minutes": "2",
      "new_errors": 0,
      "description": "Runtime stability monitoring (TypeError/coroutine errors)"
    },
    "entity_persistence": {
      "status": "PASS",
      "recovery_time_seconds": "1",
      "description": "Entity persistence through MQTT broker restart (≤10s recovery)"
    },
    "discovery_ownership": {
      "status": "PASS",
      "description": "No duplicate discovery owners after restart"
    },
    "led_discovery_gating": {
      "status": "PASS",
      "description": "LED discovery properly gated when PUBLISH_LED_DISCOVERY=0"
    }
  },
  "artifacts": {
    "mqtt_roundtrip.log": "MQTT echo test results",
    "p0_monitor.log": "P0 stability monitoring log",
    "error_count_comparison.json": "Error count analysis",
    "entity_persistence_test.log": "Entity persistence test log",
    "mqtt_persistence.log": "MQTT persistence results",
    "discovery_ownership_check.txt": "Ownership validation",
    "led_entity_schema_validation.json": "LED discovery gating results",
    "device_block_audit.log": "Device block compliance audit"
  },
  "exit_criteria": {
    "all_tests_pass": true,
    "p0_stability_120min": "false (demo: 2min)",
    "entity_recovery_10s": "true",
    "zero_duplicate_owners": true,
    "led_gating_enforced": true
  }
}
