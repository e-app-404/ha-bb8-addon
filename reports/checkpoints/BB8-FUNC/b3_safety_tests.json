{"created": 1760099369.202463, "duration": 2.101567029953003, "exitcode": 1, "root": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/tests", "environment": {}, "summary": {"passed": 18, "failed": 8, "total": 26, "collected": 26}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "integration/test_safety_estop.py", "type": "Module"}]}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController", "outcome": "passed", "result": [{"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_safety_config_from_env", "type": "Function", "lineno": 25}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_safety_config_defaults", "type": "Function", "lineno": 38}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_basic_drive_validation", "type": "Function", "lineno": 46}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_speed_clamping", "type": "Function", "lineno": 59}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_duration_clamping", "type": "Function", "lineno": 75}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_heading_wrapping", "type": "Function", "lineno": 91}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_rate_limiting", "type": "Function", "lineno": 103}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_device_offline_blocking", "type": "Function", "lineno": 125}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_estop_activation_and_blocking", "type": "Function", "lineno": 136}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_estop_clear_when_safe", "type": "Function", "lineno": 157}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_estop_clear_when_unsafe", "type": "Function", "lineno": 179}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_multiple_estop_activation", "type": "Function", "lineno": 197}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_auto_stop_scheduling", "type": "Coroutine", "lineno": 209}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_auto_stop_cancellation", "type": "Coroutine", "lineno": 229}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_safety_status_reporting", "type": "Function", "lineno": 251}]}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration", "outcome": "passed", "result": [{"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_drive_command_validation", "type": "Function", "lineno": 290}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_drive_command_safety_violation", "type": "Function", "lineno": 300}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_estop_activation", "type": "Function", "lineno": 313}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_estop_clear", "type": "Function", "lineno": 321}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_telemetry_publishing", "type": "Coroutine", "lineno": 332}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_telemetry_with_estop", "type": "Coroutine", "lineno": 358}]}, {"nodeid": "integration/test_safety_estop.py::TestRateLimitingBurstProtection", "outcome": "passed", "result": [{"nodeid": "integration/test_safety_estop.py::TestRateLimitingBurstProtection::test_burst_command_throttling", "type": "Function", "lineno": 380}, {"nodeid": "integration/test_safety_estop.py::TestRateLimitingBurstProtection::test_rate_limit_recovery", "type": "Function", "lineno": 404}]}, {"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability", "outcome": "passed", "result": [{"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability::test_configurable_speed_limit", "type": "Function", "lineno": 423}, {"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability::test_configurable_duration_limit", "type": "Function", "lineno": 439}, {"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability::test_configurable_rate_limit", "type": "Function", "lineno": 455}]}, {"nodeid": "integration/test_safety_estop.py", "outcome": "passed", "result": [{"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController", "type": "Class"}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration", "type": "Class"}, {"nodeid": "integration/test_safety_estop.py::TestRateLimitingBurstProtection", "type": "Class"}, {"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability", "type": "Class"}]}], "tests": [{"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_safety_config_from_env", "lineno": 25, "outcome": "passed", "keywords": ["test_safety_config_from_env", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.00037429199437610805, "outcome": "passed"}, "call": {"duration": 0.0009332920017186552, "outcome": "passed"}, "teardown": {"duration": 8.366600377485156e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_safety_config_defaults", "lineno": 38, "outcome": "passed", "keywords": ["test_safety_config_defaults", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.966702105477452e-05, "outcome": "passed"}, "call": {"duration": 7.579199154861271e-05, "outcome": "passed"}, "teardown": {"duration": 7.899999036453664e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_basic_drive_validation", "lineno": 46, "outcome": "passed", "keywords": ["test_basic_drive_validation", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.562499376945198e-05, "outcome": "passed"}, "call": {"duration": 0.0002508750185370445, "outcome": "passed", "stdout": "2025-10-10 13:29:27,916 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n"}, "teardown": {"duration": 0.0002798750065267086, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_speed_clamping", "lineno": 59, "outcome": "failed", "keywords": ["test_speed_clamping", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.0005232499970588833, "outcome": "passed"}, "call": {"duration": 0.0003464579931460321, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/safety.py", "lineno": 155, "message": "bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.1ms < 50ms"}, "stdout": "2025-10-10 13:29:27,917 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 150}\n2025-10-10 13:29:27,918 WARNING:bb8_core.logging_setup: {'event': 'safety_speed_clamped', 'original': 200, 'clamped': 150, 'max_allowed': 150}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 150}\n{\"event\": \"safety_speed_clamped\", \"original\": 200, \"clamped\": 150, \"max_allowed\": 150}\n", "longrepr": "E   bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.1ms < 50ms"}, "teardown": {"duration": 0.00011054202332161367, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_duration_clamping", "lineno": 75, "outcome": "failed", "keywords": ["test_duration_clamping", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.47920130379498e-05, "outcome": "passed"}, "call": {"duration": 0.0002930000191554427, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/safety.py", "lineno": 155, "message": "bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.1ms < 50ms"}, "stdout": "2025-10-10 13:29:27,919 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 1500, 'max_speed': 180}\n2025-10-10 13:29:27,919 WARNING:bb8_core.logging_setup: {'event': 'safety_duration_clamped', 'original': 3000, 'clamped': 1500, 'max_allowed': 1500}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 1500, \"max_speed\": 180}\n{\"event\": \"safety_duration_clamped\", \"original\": 3000, \"clamped\": 1500, \"max_allowed\": 1500}\n", "longrepr": "E   bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.1ms < 50ms"}, "teardown": {"duration": 9.637500625103712e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_heading_wrapping", "lineno": 91, "outcome": "failed", "keywords": ["test_heading_wrapping", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.47920130379498e-05, "outcome": "passed"}, "call": {"duration": 0.0004569999873638153, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/safety.py", "lineno": 155, "message": "bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.0ms < 50ms"}, "stdout": "2025-10-10 13:29:27,920 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n", "longrepr": "E   bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.0ms < 50ms"}, "teardown": {"duration": 8.362499647773802e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_rate_limiting", "lineno": 103, "outcome": "passed", "keywords": ["test_rate_limiting", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.066599209792912e-05, "outcome": "passed"}, "call": {"duration": 0.1137872499821242, "outcome": "passed", "stdout": "2025-10-10 13:29:27,921 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 100, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 100, \"max_duration_ms\": 2000, \"max_speed\": 180}\n"}, "teardown": {"duration": 0.0001840839977376163, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_device_offline_blocking", "lineno": 125, "outcome": "passed", "keywords": ["test_device_offline_blocking", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 9.824999142438173e-05, "outcome": "passed"}, "call": {"duration": 0.0003296659851912409, "outcome": "passed", "stdout": "2025-10-10 13:29:28,036 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n"}, "teardown": {"duration": 7.991600432433188e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_estop_activation_and_blocking", "lineno": 136, "outcome": "passed", "keywords": ["test_estop_activation_and_blocking", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.001126791990827769, "outcome": "passed"}, "call": {"duration": 0.00042624998604878783, "outcome": "passed", "stdout": "2025-10-10 13:29:28,038 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,038 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_activated', 'reason': 'Test emergency stop', 'timestamp': 1760099368.038474}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_estop_activated\", \"reason\": \"Test emergency stop\", \"timestamp\": 1760099368.038474}\n"}, "teardown": {"duration": 6.608400144614279e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_estop_clear_when_safe", "lineno": 157, "outcome": "passed", "keywords": ["test_estop_clear_when_safe", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 6.941601168364286e-05, "outcome": "passed"}, "call": {"duration": 0.00025608300347812474, "outcome": "passed", "stdout": "2025-10-10 13:29:28,039 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,039 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_activated', 'reason': 'Test emergency', 'timestamp': 1760099368.0391018}\n2025-10-10 13:29:28,039 INFO:bb8_core.logging_setup: {'event': 'safety_estop_cleared', 'previous_reason': 'Test emergency', 'timestamp': 1760099368.039149}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_estop_activated\", \"reason\": \"Test emergency\", \"timestamp\": 1760099368.0391018}\n{\"event\": \"safety_estop_cleared\", \"previous_reason\": \"Test emergency\", \"timestamp\": 1760099368.039149}\n"}, "teardown": {"duration": 8.275001891888678e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_estop_clear_when_unsafe", "lineno": 179, "outcome": "passed", "keywords": ["test_estop_clear_when_unsafe", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.15333929099142551, "outcome": "passed"}, "call": {"duration": 0.0007997079810593277, "outcome": "passed", "stdout": "2025-10-10 13:29:28,193 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,193 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_activated', 'reason': 'Test emergency', 'timestamp': 1760099368.19378}\n2025-10-10 13:29:28,193 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_clear_denied', 'reason': 'Cannot clear emergency stop - device not connected'}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_estop_activated\", \"reason\": \"Test emergency\", \"timestamp\": 1760099368.19378}\n{\"event\": \"safety_estop_clear_denied\", \"reason\": \"Cannot clear emergency stop - device not connected\"}\n"}, "teardown": {"duration": 7.054200978018343e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_multiple_estop_activation", "lineno": 197, "outcome": "passed", "keywords": ["test_multiple_estop_activation", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.170898607000709e-05, "outcome": "passed"}, "call": {"duration": 0.00020337500609457493, "outcome": "passed", "stdout": "2025-10-10 13:29:28,194 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,194 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_activated', 'reason': 'First emergency', 'timestamp': 1760099368.194442}\n2025-10-10 13:29:28,194 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_already_active', 'current_reason': 'First emergency', 'new_reason': 'Second emergency'}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_estop_activated\", \"reason\": \"First emergency\", \"timestamp\": 1760099368.194442}\n{\"event\": \"safety_estop_already_active\", \"current_reason\": \"First emergency\", \"new_reason\": \"Second emergency\"}\n"}, "teardown": {"duration": 5.229099770076573e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_auto_stop_scheduling", "lineno": 209, "outcome": "passed", "keywords": ["test_auto_stop_scheduling", "asyncio", "pytestmark", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.0006177919858600944, "outcome": "passed"}, "call": {"duration": 0.15115087499725632, "outcome": "passed", "stdout": "2025-10-10 13:29:28,195 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,296 INFO:bb8_core.logging_setup: {'event': 'safety_auto_stop_triggered', 'duration_ms': 100}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_auto_stop_triggered\", \"duration_ms\": 100}\n"}, "teardown": {"duration": 0.0006165420054458082, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_auto_stop_cancellation", "lineno": 229, "outcome": "passed", "keywords": ["test_auto_stop_cancellation", "asyncio", "pytestmark", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.00025775001267902553, "outcome": "passed"}, "call": {"duration": 0.1799544999958016, "outcome": "passed", "stdout": "2025-10-10 13:29:28,348 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n"}, "teardown": {"duration": 0.0010590419988147914, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestMotionSafetyController::test_safety_status_reporting", "lineno": 251, "outcome": "passed", "keywords": ["test_safety_status_reporting", "TestMotionSafetyController", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.004733832989586517, "outcome": "passed"}, "call": {"duration": 0.0004198749957140535, "outcome": "passed", "stdout": "2025-10-10 13:29:28,534 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,534 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_activated', 'reason': 'Test status', 'timestamp': 1760099368.534827}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_estop_activated\", \"reason\": \"Test status\", \"timestamp\": 1760099368.534827}\n"}, "teardown": {"duration": 7.37080117687583e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_drive_command_validation", "lineno": 290, "outcome": "passed", "keywords": ["test_drive_command_validation", "TestFacadeSafetyIntegration", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.0012325830175541341, "outcome": "passed"}, "call": {"duration": 0.009063957986654714, "outcome": "passed", "stdout": "2025-10-10 13:29:28,541 ERROR:bb8_core.logging_setup: {'event': 'facade_drive_error', 'speed': 100, 'heading': 90, 'duration_ms': 1500, 'error': 'no running event loop'}\n", "stderr": "{\"event\": \"facade_drive_error\", \"speed\": 100, \"heading\": 90, \"duration_ms\": 1500, \"error\": \"no running event loop\"}\n"}, "teardown": {"duration": 0.000459708011476323, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_drive_command_safety_violation", "lineno": 300, "outcome": "passed", "keywords": ["test_drive_command_safety_violation", "TestFacadeSafetyIntegration", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.000693166017299518, "outcome": "passed"}, "call": {"duration": 0.0007451670244336128, "outcome": "passed", "stdout": "2025-10-10 13:29:28,602 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_activated', 'reason': 'Test block', 'timestamp': 1760099368.602648}\n2025-10-10 13:29:28,602 WARNING:bb8_core.logging_setup: {'event': 'facade_drive_safety_violation', 'speed': 100, 'heading': 90, 'duration_ms': 1500, 'constraint': 'estop_active', 'error': 'Motion blocked by emergency stop: Test block'}\n", "stderr": "{\"event\": \"safety_estop_activated\", \"reason\": \"Test block\", \"timestamp\": 1760099368.602648}\n{\"event\": \"facade_drive_safety_violation\", \"speed\": 100, \"heading\": 90, \"duration_ms\": 1500, \"constraint\": \"estop_active\", \"error\": \"Motion blocked by emergency stop: Test block\"}\n"}, "teardown": {"duration": 0.0001430409902241081, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_estop_activation", "lineno": 313, "outcome": "failed", "keywords": ["test_estop_activation", "TestFacadeSafetyIntegration", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.0015677920018788427, "outcome": "passed"}, "call": {"duration": 0.005148791999090463, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/tests/integration/test_safety_estop.py", "lineno": 320, "message": "AssertionError: assert 'Test block' == 'Test emergency'\n  \n  \u001b[0m\u001b[91m- Test emergency\u001b[39;49;00m\u001b[90m\u001b[39;49;00m\n  \u001b[92m+ Test block\u001b[39;49;00m\u001b[90m\u001b[39;49;00m"}, "stdout": "2025-10-10 13:29:28,606 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_already_active', 'current_reason': 'Test block', 'new_reason': 'Test emergency'}\n2025-10-10 13:29:28,607 ERROR:bb8_core.logging_setup: {'event': 'facade_estop_error', 'reason': 'Test emergency', 'error': 'no running event loop'}\n", "stderr": "{\"event\": \"safety_estop_already_active\", \"current_reason\": \"Test block\", \"new_reason\": \"Test emergency\"}\n{\"event\": \"facade_estop_error\", \"reason\": \"Test emergency\", \"error\": \"no running event loop\"}\n", "longrepr": "E   AssertionError: assert 'Test block' == 'Test emergency'\n      \n      \u001b[0m\u001b[91m- Test emergency\u001b[39;49;00m\u001b[90m\u001b[39;49;00m\n      \u001b[92m+ Test block\u001b[39;49;00m\u001b[90m\u001b[39;49;00m"}, "teardown": {"duration": 0.0001119170046877116, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_estop_clear", "lineno": 321, "outcome": "passed", "keywords": ["test_estop_clear", "TestFacadeSafetyIntegration", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.000616083008935675, "outcome": "passed"}, "call": {"duration": 0.0005868329899385571, "outcome": "passed", "stdout": "2025-10-10 13:29:28,612 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_already_active', 'current_reason': 'Test block', 'new_reason': 'Test emergency'}\n2025-10-10 13:29:28,612 INFO:bb8_core.logging_setup: {'event': 'safety_estop_cleared', 'previous_reason': 'Test block', 'timestamp': 1760099368.6124108}\n2025-10-10 13:29:28,612 ERROR:bb8_core.logging_setup: {'event': 'facade_clear_estop_error', 'error': 'no running event loop'}\n", "stderr": "{\"event\": \"safety_estop_already_active\", \"current_reason\": \"Test block\", \"new_reason\": \"Test emergency\"}\n{\"event\": \"safety_estop_cleared\", \"previous_reason\": \"Test block\", \"timestamp\": 1760099368.6124108}\n{\"event\": \"facade_clear_estop_error\", \"error\": \"no running event loop\"}\n"}, "teardown": {"duration": 7.658300455659628e-05, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_telemetry_publishing", "lineno": 332, "outcome": "failed", "keywords": ["test_telemetry_publishing", "asyncio", "pytestmark", "TestFacadeSafetyIntegration", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.000621084007434547, "outcome": "passed"}, "call": {"duration": 0.0013245830195955932, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/tests/integration/test_safety_estop.py", "lineno": 347, "message": "AssertionError: Expected 'publish' to have been called."}, "stdout": "2025-10-10T12:00:00.000000Z,614 ERROR:bb8_core.logging_setup: {'event': 'facade_telemetry_error', 'error': 'Object of type coroutine is not JSON serializable'}\n", "stderr": "{\"event\": \"facade_telemetry_error\", \"error\": \"Object of type coroutine is not JSON serializable\"}\n", "longrepr": "E   AssertionError: Expected 'publish' to have been called.\n\nDuring handling of the above exception, another exception occurred:\nE   AssertionError: Expected 'publish' to have been called."}, "teardown": {"duration": 0.0011081669945269823, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestFacadeSafetyIntegration::test_telemetry_with_estop", "lineno": 358, "outcome": "failed", "keywords": ["test_telemetry_with_estop", "asyncio", "pytestmark", "TestFacadeSafetyIntegration", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.0008310000121127814, "outcome": "passed"}, "call": {"duration": 0.001673292019404471, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/tests/integration/test_safety_estop.py", "lineno": 373, "message": "TypeError: 'NoneType' object is not subscriptable"}, "stdout": "2025-10-10 13:29:28,633 WARNING:bb8_core.logging_setup: {'event': 'safety_estop_activated', 'reason': 'Test emergency', 'timestamp': 1760099368.633953}\n2025-10-10T12:00:00.000000Z,634 ERROR:bb8_core.logging_setup: {'event': 'facade_telemetry_error', 'error': 'Object of type coroutine is not JSON serializable'}\n", "stderr": "{\"event\": \"safety_estop_activated\", \"reason\": \"Test emergency\", \"timestamp\": 1760099368.633953}\n{\"event\": \"facade_telemetry_error\", \"error\": \"Object of type coroutine is not JSON serializable\"}\n", "longrepr": "E   TypeError: 'NoneType' object is not subscriptable"}, "teardown": {"duration": 0.00027237500762566924, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestRateLimitingBurstProtection::test_burst_command_throttling", "lineno": 380, "outcome": "passed", "keywords": ["test_burst_command_throttling", "TestRateLimitingBurstProtection", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.887498941272497e-05, "outcome": "passed"}, "call": {"duration": 0.0002165829937439412, "outcome": "passed", "stdout": "2025-10-10 13:29:28,636 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n"}, "teardown": {"duration": 0.0001807910157367587, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestRateLimitingBurstProtection::test_rate_limit_recovery", "lineno": 404, "outcome": "passed", "keywords": ["test_rate_limit_recovery", "TestRateLimitingBurstProtection", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.00015062501188367605, "outcome": "passed"}, "call": {"duration": 0.06562708402634598, "outcome": "passed", "stdout": "2025-10-10 13:29:28,637 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n"}, "teardown": {"duration": 0.00036133298999629915, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability::test_configurable_speed_limit", "lineno": 423, "outcome": "failed", "keywords": ["test_configurable_speed_limit", "TestSafetyConfigurability", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.0002543749869801104, "outcome": "passed"}, "call": {"duration": 0.001917332992888987, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/safety.py", "lineno": 155, "message": "bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.0ms < 50ms"}, "stdout": "2025-10-10 13:29:28,705 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 100}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 100}\n", "longrepr": "E   bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.0ms < 50ms"}, "teardown": {"duration": 0.00012537502334453166, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability::test_configurable_duration_limit", "lineno": 439, "outcome": "failed", "keywords": ["test_configurable_duration_limit", "TestSafetyConfigurability", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 7.762500899843872e-05, "outcome": "passed"}, "call": {"duration": 0.00024370799656026065, "outcome": "failed", "crash": {"path": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/safety.py", "lineno": 155, "message": "bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.0ms < 50ms"}, "stdout": "2025-10-10 13:29:28,707 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 1000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 1000, \"max_speed\": 180}\n", "longrepr": "E   bb8_core.safety.SafetyViolation: Drive command rate limit exceeded - 0.0ms < 50ms"}, "teardown": {"duration": 0.00020504099666140974, "outcome": "passed"}}, {"nodeid": "integration/test_safety_estop.py::TestSafetyConfigurability::test_configurable_rate_limit", "lineno": 455, "outcome": "passed", "keywords": ["test_configurable_rate_limit", "TestSafetyConfigurability", "test_safety_estop.py", "integration", "tests", ""], "setup": {"duration": 0.00010895798914134502, "outcome": "passed"}, "call": {"duration": 0.48392745899036527, "outcome": "passed", "stdout": "2025-10-10 13:29:28,709 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 25, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,746 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 50, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,809 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 100, 'max_duration_ms': 2000, 'max_speed': 180}\n2025-10-10 13:29:28,922 INFO:bb8_core.logging_setup: {'event': 'safety_controller_init', 'min_interval_ms': 200, 'max_duration_ms': 2000, 'max_speed': 180}\n", "stderr": "{\"event\": \"safety_controller_init\", \"min_interval_ms\": 25, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_controller_init\", \"min_interval_ms\": 50, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_controller_init\", \"min_interval_ms\": 100, \"max_duration_ms\": 2000, \"max_speed\": 180}\n{\"event\": \"safety_controller_init\", \"min_interval_ms\": 200, \"max_duration_ms\": 2000, \"max_speed\": 180}\n"}, "teardown": {"duration": 0.007739374996162951, "outcome": "passed"}}], "warnings": [{"message": "coroutine 'BB8Facade._drive_impl' was never awaited", "category": "RuntimeWarning", "when": "runtest", "filename": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/facade.py", "lineno": 330}, {"message": "coroutine 'BB8Facade._stop_impl' was never awaited", "category": "RuntimeWarning", "when": "runtest", "filename": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/facade.py", "lineno": 403}, {"message": "coroutine 'BB8Facade._publish_telemetry' was never awaited", "category": "RuntimeWarning", "when": "runtest", "filename": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/facade.py", "lineno": 424}, {"message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited", "category": "RuntimeWarning", "when": "runtest", "filename": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/facade.py", "lineno": 458}, {"message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited", "category": "RuntimeWarning", "when": "runtest", "filename": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/tests/integration/test_safety_estop.py", "lineno": 344}, {"message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited", "category": "RuntimeWarning", "when": "runtest", "filename": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/bb8_core/facade.py", "lineno": 458}, {"message": "coroutine 'AsyncMockMixin._execute_mock_call' was never awaited", "category": "RuntimeWarning", "when": "runtest", "filename": "/Users/evertappels/actions-runner/Projects/HA-BB8/addon/tests/integration/test_safety_estop.py", "lineno": 369}]}