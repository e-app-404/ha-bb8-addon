# ═══════════════════════════════════════════════════════════════════════════
# ⟫⟫ INFLUXDB•  influxdb.yaml  •  Home Assistant InfluxDB Integration ◀
# ⟫⟫ Enables exporting of all state changes to an external InfluxDB database
# ⟫⟫ Loader configuration.yaml • packages: !include_dir_named integrations
# ⟫⟫ Tier: core  •  Domain: configuration  •  Updated: 2025-08-01
# ══════════════════════════════════════════════════════════════════
influxdb:
  host: a0d7b954-influxdb
  port: 8086
  database: homeassistant
  username: homeassistant
  password: !secret influxdb_pw
  max_retries: 3
  default_measurement: state
  include:
    domains:
      - sensor
      - binary_sensor
      - climate
      - switch
    entity_globs:
      # environment
      - sensor.temperature_*
      - sensor.humidity_*
      # energy/power
      - sensor.*_energy
      - sensor.*_power
      # motion/occupancy
      - binary_sensor.motion_*
      - binary_sensor.occupancy_*
      # your health/sleep & media library metrics
      - sensor.evert_health_biometrics_*
      - binary_sensor.evert_health_biometrics_*
      - sensor.evert_sleep_*
      - sensor.ds220plus_library_*

  exclude:
    domains:
      - media_player
      - zone
      - updater
      - group
    entity_globs:
      - sensor.sun*
      - sensor.date*
      - sensor.time*
      - sensor.*_entity_list
      - sensor.*failover_summary
      - sensor.*_minutes_since_* # usually not worth long-term in Influx

  ignore_attributes:
    - entities
    - upstream_sources
    - description
    - friendly_name
    - icon
    - subsystem
    - module
    - canonical_id
    - canonical_tier

  tags_attributes:
    - unit_of_measurement
    - device_class
    - friendly_name
