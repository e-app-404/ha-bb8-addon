# ops/ - Operations and Development Scripts\n\n## Overview\n\nThe `ops/` directory contains operational scripts organized by functional purpose. This structure provides clear separation of concerns and makes it easy to find the right tool for each task.\n\n## Directory Structure\n\n```\nops/\n‚îú‚îÄ‚îÄ ADR/              # Architecture Decision Record management\n‚îú‚îÄ‚îÄ build/            # Compilation, testing, CI/CD pipeline  \n‚îú‚îÄ‚îÄ deploy/           # Deployment orchestration and environments\n‚îú‚îÄ‚îÄ diag/             # Diagnostics and troubleshooting\n‚îú‚îÄ‚îÄ evidence/         # Evidence collection and attestation\n‚îú‚îÄ‚îÄ release/          # Version management and publishing\n‚îú‚îÄ‚îÄ utils/            # General utilities and helpers\n‚îú‚îÄ‚îÄ validation/       # Code quality and compliance checking\n‚îî‚îÄ‚îÄ workspace/        # Workspace setup and maintenance\n```\n\n## Functional Categories\n\n### üèóÔ∏è **Development Workflow**\n- **`build/`** - Compile, test, and validate code\n- **`validation/`** - Quality assurance and compliance\n- **`workspace/`** - Development environment management\n\n### üöÄ **Release & Deployment** \n- **`release/`** - Version bumping, changelog, publishing\n- **`deploy/`** - Environment deployment and orchestration\n\n### üìä **Operations & Support**\n- **`diag/`** - System diagnostics and troubleshooting  \n- **`evidence/`** - Operational evidence and attestation\n- **`utils/`** - General-purpose utilities\n\n### üìö **Documentation & Governance**\n- **`ADR/`** - Architecture decisions and cross-repo linking\n\n## Quick Reference\n\n### Common Operations\n\n```bash\n# Development workflow\nops/build/compile_test_gate_bleep.sh    # Full CI pipeline\nops/validation/check_structure.sh       # Structure validation\nops/workspace/one_shot_setup.sh        # Environment setup\n\n# Release workflow  \nops/release/bump_version.sh patch       # Version bump\nops/release/publish_addon_archive.sh    # Publish to repository\nops/release/deploy_ha_over_ssh.sh       # Deploy to Home Assistant\n\n# Operations\nops/diag/collect_ha_bb8_diagnostics.sh  # Collect diagnostics\nops/evidence/run_evidence_stp4.sh       # Evidence collection\nops/utils/check_workspace_quiet.sh      # Silent health check\n```\n\n### Integration with Makefile\n\nThe Makefile integrates with ops/ scripts:\n\n```makefile\nrelease-patch: ops/release/bump_version.sh patch && \\\n               ops/release/publish_addon_archive.sh && \\\n               ops/release/deploy_ha_over_ssh.sh\n```\n\n## Script Standards\n\nAll scripts follow these conventions:\n\n1. **Executable permissions**: `chmod +x script.sh`\n2. **Shebang line**: `#!/usr/bin/env bash` or `#!/usr/bin/env python3`\n3. **Usage documentation**: Header comment with usage examples\n4. **Error handling**: `set -euo pipefail` for shell scripts\n5. **Exit codes**: 0=success, 1=failure, 2=error, 3=config error\n\n## Dependencies\n\n### Global Requirements\n- `git` - Version control operations\n- `ssh` - Remote deployment access \n- `curl` - HTTP API interactions\n- `python3` - Python script execution\n\n### Development Requirements  \n- Python virtual environment (`.venv/`)\n- `pytest`, `coverage` - Testing and coverage\n- `ruff`, `mypy` - Linting and type checking\n\n### Deployment Requirements\n- SSH access to Home Assistant instance\n- Home Assistant Long-Lived Access Token (LLAT)\n- Docker access (for container operations)\n\n## Security Considerations\n\n- **No secrets in logs**: Scripts avoid printing sensitive information\n- **SSH key authentication**: No password-based authentication\n- **Token validation**: LLAT presence checked before API calls\n- **Safe defaults**: Scripts fail safely rather than destructively\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Permission denied**: Run `chmod +x script.sh`\n2. **SSH connection failed**: Verify SSH config and keys\n3. **Python import errors**: Ensure virtual environment is activated\n4. **Missing dependencies**: Check README.md in specific directory\n\n### Debug Mode\n\nMost scripts support debug mode:\n```bash\nBASH_XTRACES=1 ./script.sh  # Enable bash tracing\nDEBUG=1 ./script.py         # Enable debug logging\n```\n\n## Development Guidelines\n\n### Adding New Scripts\n\n1. Choose appropriate directory based on function\n2. Follow naming convention (prefer hyphens over underscores)  \n3. Add usage documentation to script header\n4. Update directory README.md\n5. Add integration tests if applicable\n\n### Modifying Existing Scripts\n\n1. Test changes in development environment first\n2. Maintain backward compatibility when possible\n3. Update documentation for interface changes\n4. Consider impact on Makefile and CI/CD\n\n## Directory Details\n\nSee individual README.md files in each directory for detailed information:\n\n- [ADR/README.md](ADR/README.md) - Architecture Decision Records\n- [build/README.md](build/README.md) - Build and CI pipeline\n- [deploy/README.md](deploy/README.md) - Deployment orchestration  \n- [diag/README.md](diag/README.md) - Diagnostics collection\n- [evidence/README.md](evidence/README.md) - Evidence and attestation\n- [release/README.md](release/README.md) - Release management\n- [utils/README.md](utils/README.md) - Utilities and helpers\n- [validation/README.md](validation/README.md) - Quality and compliance\n- [workspace/README.md](workspace/README.md) - Workspace management\n\n---\n\n*This directory structure follows ADR-0019 three-tier documentation taxonomy and supports the complete HA-BB8 addon development and operational lifecycle.*